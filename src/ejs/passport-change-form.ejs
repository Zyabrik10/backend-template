<!DOCTYPE html>
<html>
<head>
  <title>Password Change Request</title>
</head>
<body style="font-family: Arial, sans-serif; margin: 0; padding: 0;">
  <table role="presentation" cellspacing="0" cellpadding="0" border="0" align="center" style="width: 100%; max-width: 300px; margin: auto;">
    <tr>
      <td style="text-align: center; padding: 20px;">
        <h2 style="font-size: 18px; margin-bottom: 20px;">Change Your Password</h2>
        <form style="text-align: center;">
          <input type="password" name="new_password" placeholder="New Password" required style="width: 100%; padding: 10px; font-size: 14px; border: 1px solid #ccc; border-radius: 5px; margin-bottom: 10px;">
          <input type="password" name="confirm_password" placeholder="Confirm Password" required style="width: 100%; padding: 10px; font-size: 14px; border: 1px solid #ccc; border-radius: 5px; margin-bottom: 10px;">
          <input type="submit" value="Change Password" style="background-color: #007BFF; color: #fff; font-size: 14px; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
        </form>
      </td>
    </tr>
  </table>

  <script>
    const form = document.querySelector("form");
    const token = "<%= token %>"

    form.addEventListener("submit", (e)=>{
        e.preventDefault();
        
        fetch("http://localhost:3000/users/update-password", {
            method: "POST",
            body: JSON.stringify({
              "password": form.new_password.value.trim()
            }),
            headers: {
            Authorization: `Bearer ${token}`,
            "Content-Type": "application/json",
            },
        }).then(console.log).catch(console.log);
    });
  </script>
</body>
</html>